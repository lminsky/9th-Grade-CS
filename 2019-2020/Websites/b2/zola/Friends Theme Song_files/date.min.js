Date.prototype.getWeekYear=function(){var b=new Date(this.valueOf());b.setDate(b.getDate()-(this.getDay()+6)%7+3);return b.getFullYear()-2E3};
Date.prototype.getWeek=function(){var e=new Date(this.getFullYear(),0,1),a=e.getDay()-1;a=a>=0?a:a+7;var t,n=Math.floor((this.getTime()-e.getTime()-6e4*(this.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)+1;return a<4?(t=Math.floor((n+a-1)/7)+1)>52&&(nYear=new Date(this.getFullYear()+1,0,1),nday=nYear.getDay()-1,nday=nday>=0?nday:nday+7,t=nday<4?1:53):0==(t=Math.floor((n+a-1)/7))&&(nDate=new Date(this.getFullYear()-1,11,31),nYear=new Date(this.getFullYear()-1,0,1),nday=nYear.getDay()-1,nday=nday>=0?nday:nday+7,ndaynum=Math.floor((nDate.getTime()-nYear.getTime()-6e4*(nDate.getTimezoneOffset()-nYear.getTimezoneOffset()))/864e5)+1,t=nday<4?Math.floor((ndaynum+nday-1)/7)+1:Math.floor((ndaynum+nday-1)/7)),(t="0"+t).slice(-2)};